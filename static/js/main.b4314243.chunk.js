(this["webpackJsonpranking-cemas"]=this["webpackJsonpranking-cemas"]||[]).push([[0],{28:function(e,n,t){},29:function(e,n,t){"use strict";t.r(n);var c=t(4),a=t.n(c),r=t(17),i=t.n(r),s=t(7),o=t(12);t(23),t(30);o.a.initializeApp({apiKey:"AIzaSyB_WMkXgz1VGadOYztJs7OY30aSEZTuGIg",authDomain:"rankings-cemas.firebaseapp.com",projectId:"rankings-cemas",storageBucket:"rankings-cemas.appspot.com",messagingSenderId:"193263297303",appId:"1:193263297303:web:f285432a75d975d8944d52",measurementId:"G-V17NRJM8LM"});o.a.firestore();var l=new o.a.auth.GoogleAuthProvider,u=t(1),d=function(e){var n=e.onClick,t=void 0===n?null:n,c=e.children,a=void 0===c?null:c;return Object(u.jsxs)("button",{onClick:t,children:[" ",a," "]})};var j=function(e){var n=Object(c.useState)(!0),t=Object(s.a)(n,2),a=t[0],r=t[1],i=Object(c.useState)(!0),o=Object(s.a)(i,2),l=o[0],u=o[1];return Object(c.useEffect)((function(){return e.onAuthStateChanged((function(e){u(e||!1),a&&r(!1)}))}),[e,a]),{user:l,initializing:a}},b=t(10);function m(e){var n=e.estudiante,t=Object(c.useState)(""),a=Object(s.a)(t,2),r=a[0];a[1];return Object(u.jsx)("div",{children:Object(u.jsxs)("li",{className:"list-group-item list-group-item-action ".concat(r),children:[Object(u.jsxs)("div",{className:"d-flex w-100 justify-content-between",children:[Object(u.jsx)("h5",{className:"mb-1",children:n.nombre_estudiante}),Object(u.jsx)("small",{children:n.numero_estudiante})]}),Object(u.jsxs)("p",{className:"mb-1",children:[" Asignaturas: ",n.asignaturas.map((function(e){return Object(u.jsxs)("small",{children:[e.codigo_asignatura," "]})}))]}),Object(u.jsxs)("p",{className:"mb-1",children:[" Modulos: ",n.modulos.map((function(e){return Object(u.jsxs)("small",{children:[e.codigo_asignatura," "]})}))]}),Object(u.jsxs)("p",{className:"mb-1",children:[" ","Promedio Academico : ".concat(n.idx_academico)," "]}),Object(u.jsxs)("p",{className:"mb-1",children:[" ","Promedio Tecnico : ".concat(n.idx_tecnico)," "]}),Object(u.jsxs)("p",{className:"mb-1",children:[" ","Promedio General : ".concat(n.idx_general)," "]})]})})}var h=function(e){var n=0,t=0;return e?(e.forEach((function(e,c){n+=parseFloat(e.cf),t=c})),n/(t+1)):0},O=function(e,n){return e&&n?(n+e)/2:e&&!n?e:0},f=function(e,n){var t=0,c=0;switch(n[0]){case"4":case"5":return e.forEach((function(e,n){t+=parseFloat(e.acumulado),c=n})),t/(c+1);case"6":return e.forEach((function(e,n){if("MF0000_FCT"==e.codigo_asignatura){var a=100*parseFloat(e.acumulado)/e.total;t+=a}else t+=parseFloat(e.acumulado);c=n})),t/(c+1);default:return null}};function x(e){var n=e.url;console.log("Lista Boletines URL: ",n);var t=function(e){var n=Object(c.useRef)(!0),t=Object(c.useState)({data:null,loading:!0,error:null}),a=Object(s.a)(t,2),r=a[0],i=a[1];return Object(c.useEffect)((function(){return function(){n.current=!1}}),[]),Object(c.useEffect)((function(){i({data:null,loading:!0,error:null}),fetch(e).then((function(e){return e.json()})).then((function(e){n.current&&i({loading:!1,error:null,data:e})})).catch((function(){i({data:null,loading:!1,error:"No se pudo cargar la info"})}))}),[e]),r}(n),a=t.data,r=t.loading,i=t.error;if(r&&n)return Object(u.jsx)("h1",{children:"Loading"});if(i)return console.log(i),Object(u.jsx)("h3",{children:i});console.log("Datos: ",a);var o=function(e){return e.sort((function(e,n){return e.idx_general<n.idx_general?1:e.idx_general>n.idx_general?-1:0}))}(a.data.filter((function(e){return e.asignaturas.length>2})).map((function(e){var n=h(e.asignaturas),t=f(null===e||void 0===e?void 0:e.modulos,null===e||void 0===e?void 0:e.curso),c=O(n,t);return Object(b.a)(Object(b.a)({},e),{},{idx_academico:n,idx_tecnico:t,idx_general:c})})));return Object(u.jsx)("div",{children:Object(u.jsx)("div",{className:"list-group",children:o.map((function(e){return Object(u.jsx)(m,{estudiante:e},e._id)}))})})}var p=function(e,n){var t="/boletin/".concat(e,":").concat(n,":");return"".concat("https://cemasapi.herokuapp.com").concat("/reportes").concat(encodeURI(t))},g=t(13);function v(e){var n=e.handleUrl,t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Object(c.useState)(e),t=Object(s.a)(n,2),a=t[0],r=t[1];return[a,function(e){var n=e.target;r(Object(b.a)(Object(b.a)({},a),{},Object(g.a)({},n.name,n.value)))},function(){r(e)}]}({curso:"",periodo:""}),a=Object(s.a)(t,3),r=a[0],i=a[1],o=a[2],l=r.curso,d=r.periodo;return Object(u.jsx)("nav",{children:Object(u.jsx)("form",{onSubmit:function(e){e.preventDefault(),console.info("Form Values: ",l,d);var t=p(l,d);console.info("URL: ",t),n(t),o()},children:Object(u.jsxs)("div",{className:"form-row ml-5",children:[Object(u.jsxs)("label",{class:"col-md-3 col-sm-6",children:[Object(u.jsx)("span",{children:"Curso"}),Object(u.jsx)("input",{type:"text",className:"curso",placeholder:"6D",name:"curso",value:l,onChange:i})]}),Object(u.jsxs)("label",{class:"col-md-3 col-sm-6",children:[Object(u.jsx)("span",{children:"Periodo"}),Object(u.jsx)("input",{type:"text",className:"periodo",placeholder:"2020-2021",name:"periodo",value:d,onChange:i})]}),Object(u.jsxs)("label",{class:"col-md-4 col-sm-6",children:[Object(u.jsx)("span",{children:"Ordenar"}),Object(u.jsxs)("select",{id:"filter",className:"dropdown",children:[Object(u.jsx)("option",{value:"num-lista",children:"N\xfamero (Defecto)"}),Object(u.jsx)("option",{value:"idx-academico",children:"Indice Acad\xe9mico"}),Object(u.jsx)("option",{value:"idx-tecnico",children:"Indice T\xe9cnico"}),Object(u.jsx)("option",{value:"idx-general",children:"Indice General"})]})]}),Object(u.jsx)("div",{class:"container-button  col-md-2 col-sm-6",children:Object(u.jsx)("button",{className:"buscar",type:"submit",children:"Buscar"})})]})})})}var N=function(e){var n=e.onClick,t=void 0===n?null:n,c=e.children,a=void 0===c?null:c;return Object(u.jsxs)("button",{className:"log_out",onClick:t,children:[" ",a," "]})},k=t(11),_=t.n(k),w=t(14),C=function(){var e=Object(w.a)(_.a.mark((function e(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.a.auth().signOut();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.error(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}(),S=function(){return Object(u.jsx)("div",{className:"menu container-fluid",children:Object(u.jsx)("div",{className:"row",children:Object(u.jsxs)("header",{className:"col-lg-12",children:[Object(u.jsxs)("div",{class:"cemas",children:[Object(u.jsx)("img",{className:"logo",src:"https://i.imgur.com/KT8UtmZ.png",alt:""}),Object(u.jsx)("h1",{className:"title",children:"Ranking Cemas"})]}),Object(u.jsx)(N,{onClick:C,children:" Salir "})]})})})},I=function(){var e=Object(w.a)(_.a.mark((function e(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.a.auth().useDeviceLanguage(),e.prev=1,e.next=4,o.a.auth().signInWithPopup(l);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.error(e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(){return e.apply(this,arguments)}}();var F=function(){var e=Object(c.useState)(null),n=Object(s.a)(e,2),t=n[0],a=n[1];console.log(t);var r=j(o.a.auth()),i=r.user,l=r.itializing;return Object(u.jsxs)("div",{children:[function(){if(l)return Object(u.jsx)("div",{children:Object(u.jsx)("h3",{children:"Loadinng..."})})}(),i?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(S,{}),Object(u.jsxs)("div",{className:"container",id:"ranking",children:[Object(u.jsx)("div",{className:"row mt-4",children:Object(u.jsx)("div",{className:"col",children:Object(u.jsx)(v,{handleUrl:function(e){a(e)}})})}),Object(u.jsx)("div",{className:"row mt-4",children:Object(u.jsxs)("div",{className:"col mt-4 ml-5 mr-5 mb-5",children:[Object(u.jsx)("h3",{children:"Lista de boletines:"}),Object(u.jsx)("hr",{}),t&&Object(u.jsx)(x,{url:t})]})})]})]}):Object(u.jsx)(d,{onClick:I,children:" Sign in with Google"})]})},L=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,31)).then((function(n){var t=n.getCLS,c=n.getFID,a=n.getFCP,r=n.getLCP,i=n.getTTFB;t(e),c(e),a(e),r(e),i(e)}))};t(28);i.a.render(Object(u.jsx)(a.a.StrictMode,{children:Object(u.jsx)(F,{})}),document.getElementById("root")),L()}},[[29,1,2]]]);
//# sourceMappingURL=main.b4314243.chunk.js.map